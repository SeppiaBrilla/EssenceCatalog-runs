language ESSENCE' 1.0

given n: int(1..)
find arrangement_Function1D: matrix indexed by [int(1..n)] of int(1..n)
find arrangement_FunctionAsRelation_RelationAsMatrix: matrix indexed by [int(1..n), int(1..n)] of bool
branching on [arrangement_FunctionAsRelation_RelationAsMatrix, arrangement_Function1D]
such that
    and([|arrangement_Function1D[q1] -
          sum([toInt(arrangement_FunctionAsRelation_RelationAsMatrix[q22_1, q22_2]) * catchUndef(q22_2, 0)
                   | q22_1 : int(1..n), q22_2 : int(1..n), q22_1 = q2])|
         != |q1 - q2|
         /\
         or([arrangement_FunctionAsRelation_RelationAsMatrix[q25_1, q25_2] /\ q25_1 = q2
                 | q25_1 : int(1..n), q25_2 : int(1..n)])
             | q1 : int(1..n), q2 : int(1..n), q1 < q2]),
    allDiff(arrangement_Function1D),
    and([or([arrangement_Function1D[q4] = q3 | q4 : int(1..n)]) | q3 : int(1..n)]),
    and([1 =
         sum([toInt(arrangement_FunctionAsRelation_RelationAsMatrix[q14_1, q14_2])
                  | q14_1 : int(1..n), q14_2 : int(1..n), q14_1 = q8])
             | q8 : int(1..n)]),
    and([arrangement_FunctionAsRelation_RelationAsMatrix[q26_1, q26_2] /\
         arrangement_FunctionAsRelation_RelationAsMatrix[q27_1, q27_2]
         -> (q26_1 < q27_1 -> q26_2 != q27_2)
             | q26_1 : int(1..n), q26_2 : int(1..n), q27_1 : int(1..n), q27_2 : int(1..n)]),
    and([or([arrangement_FunctionAsRelation_RelationAsMatrix[q15_1, q15_2] /\ q15_2 = q12
                 | q15_1 : int(1..n), q15_2 : int(1..n)])
             | q12 : int(1..n)]),
    and([arrangement_FunctionAsRelation_RelationAsMatrix[q17_1, q17_2] -> arrangement_Function1D[q17_1] = q17_2
             | q17_1 : int(1..n), q17_2 : int(1..n)]),
    and([or([arrangement_FunctionAsRelation_RelationAsMatrix[q20_1, q20_2] /\
             (q20_1 = q18 /\ q20_2 = arrangement_Function1D[q18])
                 | q20_1 : int(1..n), q20_2 : int(1..n)])
             | q18 : int(1..n)])

$ Conjure's
$ {"finds": [{"Name": "arrangement"}], "givens": [{"Name": "n"}], "enumGivens": [], "enumLettings": [],
$  "lettings":
$      [[{"Name": "Index"},
$        {"Domain":
$             {"DomainInt":
$                  [{"TagInt": []},
$                   [{"RangeBounded":
$                         [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                          {"Reference":
$                               [{"Name": "n"},
$                                {"DeclNoRepr":
$                                     ["Given", {"Name": "n"},
$                                      {"DomainInt":
$                                           [{"TagInt": []},
$                                            [{"RangeLowerBounded":
$                                                  {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]},
$                                      {"NoRegion": []}]}]}]}]]}}]],
$  "unnameds": [], "strategyQ": {"PickFirst": []}, "strategyA": {"PickAll": []},
$  "trailCompact":
$      [[1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 2], [1, 2, 2], [1, 1, 1], [1, 1, 1], [1, 1, 2], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1]],
$  "nameGenState": [["q", 28]], "nbExtraGivens": 0,
$  "representations":
$      [[{"Name": "n"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "arrangement"},
$        {"DomainFunction":
$             [{"Function_1D": []}, [{"SizeAttr_None": []}, "PartialityAttr_Total", "JectivityAttr_Bijective"],
$              {"DomainInt":
$                   [{"TagInt": []},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                           {"Reference":
$                                [{"Name": "n"},
$                                 {"DeclHasRepr":
$                                      ["Given", {"Name": "n"},
$                                       {"DomainInt":
$                                            [{"TagInt": []},
$                                             [{"RangeLowerBounded":
$                                                   {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}]}]}]}]]},
$              {"DomainInt":
$                   [{"TagInt": []},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                           {"Reference":
$                                [{"Name": "n"},
$                                 {"DeclHasRepr":
$                                      ["Given", {"Name": "n"},
$                                       {"DomainInt":
$                                            [{"TagInt": []},
$                                             [{"RangeLowerBounded":
$                                                   {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}]}]}]}]]}]}],
$       [{"Name": "arrangement"},
$        {"DomainFunction":
$             [{"Function_AsRelation": {"Relation_AsMatrix": []}},
$              [{"SizeAttr_None": []}, "PartialityAttr_Total", "JectivityAttr_Bijective"],
$              {"DomainInt":
$                   [{"TagInt": []},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                           {"Reference":
$                                [{"Name": "n"},
$                                 {"DeclHasRepr":
$                                      ["Given", {"Name": "n"},
$                                       {"DomainInt":
$                                            [{"TagInt": []},
$                                             [{"RangeLowerBounded":
$                                                   {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}]}]}]}]]},
$              {"DomainInt":
$                   [{"TagInt": []},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                           {"Reference":
$                                [{"Name": "n"},
$                                 {"DeclHasRepr":
$                                      ["Given", {"Name": "n"},
$                                       {"DomainInt":
$                                            [{"TagInt": []},
$                                             [{"RangeLowerBounded":
$                                                   {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}]}]}]}]]}]}]],
$  "representationsTree":
$      [[{"Name": "arrangement"},
$        [{"rootLabel": {"Function_1D": []},
$          "subForest": [{"rootLabel": null, "subForest": []}, {"rootLabel": null, "subForest": []}]},
$         {"rootLabel": {"Function_AsRelation": {"Relation_AsMatrix": []}},
$          "subForest": [{"rootLabel": null, "subForest": []}, {"rootLabel": null, "subForest": []}]}]],
$       [{"Name": "n"}, [{"rootLabel": null, "subForest": []}]]],
$  "originalDomains":
$      [[{"Name": "n"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "arrangement"},
$        {"DomainFunction":
$             [[], [{"SizeAttr_None": []}, "PartialityAttr_Total", "JectivityAttr_Bijective"],
$              {"DomainInt":
$                   [{"TagInt": []},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}, {"Reference": [{"Name": "n"}, null]}]}]]},
$              {"DomainInt":
$                   [{"TagInt": []},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                           {"Reference": [{"Name": "n"}, null]}]}]]}]}]],
$  "trailGeneralised":
$      [[4525844778121281443, 4844202626523965922], [5084525526035670429, 149624170725992646],
$       [-5041499042702565064, -7750499116494179409], [-6853424314929739574, -8322273627494858531],
$       [-7639055824290332790, 7569107188649896374], [846918701405328432, -3238182260972731789],
$       [3418010143641430872, 2544077667092843554], [583507121031960314, 5177133478387112911],
$       [6128493046146537060, -6568808508580976474], [-8463720194503675438, -3238182260972731789],
$       [-1222052193488531770, 841641278777344497], [-2583574544783545076, 5177133478387112911],
$       [-1667067663284075654, -8311992423974778725], [-6743100072895789266, 2544077667092843554],
$       [-8012993990555618618, 7469866030178124325], [293771745272731172, -6568808508580976474],
$       [1987335503632871034, 4911534341358865055], [-5019561693168612476, -2598881695254397378],
$       [-1544555928350847126, -5294386895435552445], [4189186349073198212, -5583424017101062699],
$       [-7383695154899983306, -4519001499505424231], [3140624210136013703, 4789770693418799587],
$       [-8202216524081558537, 2257842188428109673], [6244173998129699511, -7111604331246735799],
$       [-5046921703906333649, 855430468970006353], [-47421352581154846, 4965624124600550213],
$       [-6761505819743875116, -5913197970731744613], [-6107565247860053656, -9035560574548402686],
$       [8337398157377468746, -9035560574548402686], [-4144623222227012154, 4009921838866437237],
$       [8945335721089085254, -304707465264159120], [-5769443020922954480, -3687456941799579334],
$       [2356410070002307960, -1637156404668738858], [-8647145228245544232, 6601687075473908982],
$       [-7095755944633562138, -8391880160577352904], [-4075183139593896300, -8349058402209279475],
$       [-2062993972479921456, -1290137739207542778], [-7580541117541197364, 6357530541181966799],
$       [-5870197609221146132, 1004978292173416815], [-8131774048340345010, -1290137739207542778],
$       [2529091422293982642, 1004978292173416815], [8298813567861525252, 3464589016912070811],
$       [4059144773424573074, -2989133225137892083], [-6548304175404125376, 1608752020674507994],
$       [8786878383474931776, 751969014464279674], [-6064136634566955567, -6109216285952387666],
$       [2088798092255488028, -7028898210638864508], [443086757573678851, -5407586283580243807],
$       [7718124799849836563, -1930795528409495969], [4561439933627365029, -3075613360399691386],
$       [1800060244805126673, -4253238203458283062], [-4558426830515983501, -1930795528409495969],
$       [6096164222306365415, -829080749960994557], [7638539822104931143, -7394262467862725272],
$       [-3266121781968207264, -3075613360399691386], [6348770355957222988, -6736490564486476621],
$       [-5585569764381017453, 2504820145429531769], [-1483301891081250785, 4135924708054469468],
$       [4364276786662609409, 6577288196621331419], [-7209219296722318246, 6029001649592042213],
$       [-291629966039047420, -3281343824432427383], [-6373682981247084660, 4890659317754763558],
$       [-8723716214282719534, -6482050623806470213], [2070229274146064236, -5823072435705410350],
$       [-5949804709979248129, -6482050623806470213], [-4150830537888928473, -6348402882974322379],
$       [5996705734045389903, -5823072435705410350], [4522081846400455763, -5773046823380303099],
$       [-6036777812340915508, 4485342660267642744], [-6354579438853080256, -2307854278188338398],
$       [4873720005255387540, -3190838884716754292], [-2826711713763761832, -4520555700497484964],
$       [-2572300641964810251, 7529745321685556608], [1929493898166699165, 1931945417507617341],
$       [5882376767239477007, 4060846400261922571], [-5244623964145555947, -4527332061040881934],
$       [5882733760875880747, 4060846400261922571], [3911937377621923727, -3033858256207003903],
$       [-5717370221526771921, -3084276724269284516], [8019235885320690169, -6665138583863909489],
$       [-8654990428431003860, -6312151687856293388], [3550823648919983540, 6046574585959591080],
$       [6985060412780742427, -8438055240862190397], [8446508843646589844, -749960201466870063],
$       [711578091798321473, -3339191172747013994], [-5009801133186815433, 1184030378737815007],
$       [-1087283503970653931, -5566732803793454209], [4415076536820726440, -3339191172747013994],
$       [3357922915824217569, 4088345281297942467], [-4524460173232122990, 389453131011428170],
$       [9212789024643618180, 2179391979521883394], [7230317752191795343, -1502594428011665718],
$       [5059527721370226796, 1957454744787785068], [-7082943156956815045, -3304517150508895859],
$       [7893133834195656086, 1068700198003755196], [5302459650026200038, 1068700198003755196],
$       [5325373021480335428, -2284288237108110350], [8108826009686550450, -3304517150508895859],
$       [3118083024162694752, -4292014194134045930], [7737108138901554004, -7479216636874839372],
$       [1266500862258960272, 1068700198003755196], [1266500862258960272, 1068700198003755196]],
$  "trailVerbose": [], "trailRewrites": []}
