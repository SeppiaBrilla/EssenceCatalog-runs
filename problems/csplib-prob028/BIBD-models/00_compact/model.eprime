language ESSENCE' 1.0

given v: int(1..)
given b: int(1..)
given r: int(1..)
given k: int(1..)
given lambda: int(1..)
where v = b
where r = k
find bibd_RelationAsMatrix: matrix indexed by [int(1..v), int(1..b)] of bool
branching on [bibd_RelationAsMatrix]
such that
    and([sum([toInt(bibd_RelationAsMatrix[q8_1, q8_2]) | q8_1 : int(1..v), q8_2 : int(1..b), q8_1 = o]) = r
             | o : int(1..v)]),
    and([sum([toInt(bibd_RelationAsMatrix[q5_1, q5_2]) | q5_1 : int(1..v), q5_2 : int(1..b), q5_2 = bl]) = k
             | bl : int(1..b)]),
    and([sum([toInt(bibd_RelationAsMatrix[q11_1, q11_2] /\
                    or([bibd_RelationAsMatrix[q14_1, q14_2] /\ q14_2 = q11_2
                            | q14_1 : int(1..v), q14_2 : int(1..b), q14_1 = o2]))
                  | q11_1 : int(1..v), q11_2 : int(1..b), q11_1 = o1])
         = lambda
             | o1 : int(1..v), o2 : int(1..v), o1 != o2])

$ Conjure's
$ {"finds": [{"Name": "bibd"}],
$  "givens": [{"Name": "v"}, {"Name": "b"}, {"Name": "r"}, {"Name": "k"}, {"Name": "lambda"}], "enumGivens": [],
$  "enumLettings": [],
$  "lettings":
$      [[{"Name": "Obj"},
$        {"Domain":
$             {"DomainInt":
$                  [{"TagUnnamed": "Obj"},
$                   [{"RangeBounded":
$                         [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                          {"Reference":
$                               [{"Name": "v"},
$                                {"DeclNoRepr":
$                                     ["Given", {"Name": "v"},
$                                      {"DomainInt":
$                                           [{"TagInt": []},
$                                            [{"RangeLowerBounded":
$                                                  {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]},
$                                      {"NoRegion": []}]}]}]}]]}}],
$       [{"Name": "Block"},
$        {"Domain":
$             {"DomainInt":
$                  [{"TagUnnamed": "Block"},
$                   [{"RangeBounded":
$                         [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                          {"Reference":
$                               [{"Name": "b"},
$                                {"DeclNoRepr":
$                                     ["Given", {"Name": "b"},
$                                      {"DomainInt":
$                                           [{"TagInt": []},
$                                            [{"RangeLowerBounded":
$                                                  {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]},
$                                      {"NoRegion": []}]}]}]}]]}}]],
$  "unnameds":
$      [[{"Name": "Obj"}, {"Reference": [{"Name": "v"}, null]}],
$       [{"Name": "Block"}, {"Reference": [{"Name": "b"}, null]}]],
$  "strategyQ": {"PickFirst": []}, "strategyA": {"Compact": []},
$  "trailCompact":
$      [[1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1]],
$  "trailVerbose": [], "trailRewrites": [], "nameGenState": [["q", 15]], "nbExtraGivens": 0,
$  "representations":
$      [[{"Name": "v"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "b"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "r"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "k"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "bibd"},
$        {"DomainRelation":
$             [{"Relation_AsMatrix": []}, [{"SizeAttr_None": []}, []],
$              [{"DomainInt":
$                    [{"TagUnnamed": "Obj"},
$                     [{"RangeBounded":
$                           [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                            {"Reference":
$                                 [{"Name": "v"},
$                                  {"DeclHasRepr":
$                                       ["Given", {"Name": "v"},
$                                        {"DomainInt":
$                                             [{"TagInt": []},
$                                              [{"RangeLowerBounded":
$                                                    {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}]}]}]}]]},
$               {"DomainInt":
$                    [{"TagUnnamed": "Block"},
$                     [{"RangeBounded":
$                           [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                            {"Reference":
$                                 [{"Name": "b"},
$                                  {"DeclHasRepr":
$                                       ["Given", {"Name": "b"},
$                                        {"DomainInt":
$                                             [{"TagInt": []},
$                                              [{"RangeLowerBounded":
$                                                    {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}]}]}]}]]}]]}],
$       [{"Name": "lambda"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}]],
$  "representationsTree":
$      [[{"Name": "b"}, [{"rootLabel": null, "subForest": []}]],
$       [{"Name": "bibd"},
$        [{"rootLabel": {"Relation_AsMatrix": []},
$          "subForest": [{"rootLabel": null, "subForest": []}, {"rootLabel": null, "subForest": []}]}]],
$       [{"Name": "k"}, [{"rootLabel": null, "subForest": []}]],
$       [{"Name": "lambda"}, [{"rootLabel": null, "subForest": []}]],
$       [{"Name": "r"}, [{"rootLabel": null, "subForest": []}]], [{"Name": "v"}, [{"rootLabel": null, "subForest": []}]]],
$  "originalDomains":
$      [[{"Name": "v"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "b"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "r"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "k"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "lambda"},
$        {"DomainInt": [{"TagInt": []}, [{"RangeLowerBounded": {"Constant": {"ConstantInt": [{"TagInt": []}, 1]}}}]]}],
$       [{"Name": "bibd"},
$        {"DomainRelation":
$             [[], [{"SizeAttr_None": []}, []],
$              [{"DomainReference": [{"Name": "Obj"}, null]}, {"DomainReference": [{"Name": "Block"}, null]}]]}]],
$  "trailGeneralised":
$      [[51295916116616138, 8143206583250220707], [3821039454828775809, 644467865467553215],
$       [2405752053371157332, -8112450597396923468], [-4425007519348075722, 5818043266711389887],
$       [-7487052163960109281, -4108773683308585351], [3704041873138783039, 5967377277574623134],
$       [-2293549156615205419, -5886490164491794257], [4619410492123547448, 56910837657729147],
$       [-5515442646371849875, -2700853382237691794], [4954144545366770352, -5886490164491794257],
$       [-2302279915465163955, -2700853382237691794], [7717274332712413762, 6229051181484774571],
$       [-990568391741747661, -885865102675721926], [7036647442761778826, -858159256733457049],
$       [-6668148280545734207, 8214922877703099327], [-7134519824917914678, -3057848859132695693],
$       [-2310874348324973377, 3574162887338886755], [-1222035868830952597, 1190215273305577798],
$       [-4299521476541626193, -1032846107957301851], [4746416688940370495, 299274168722658839],
$       [-1895677753906576216, 3846693938612353997], [-2016061340117825333, 1190215273305577798],
$       [7288926011360034894, 299274168722658839], [-483774218053934075, -5492790015776481720],
$       [7747313340480478090, 4350747775595782457], [-2626807064699308913, -7940248701374419379],
$       [5541769078639642093, 3266332953641723081], [-4488182038687476000, -681335536628794915],
$       [-4649807874549233693, 125790307626672011], [6177243380863464769, -8112450597396923468],
$       [-3974006811155638094, 1654919700308216154], [660690489934195150, 5934496761468087587],
$       [-2186081065522553143, 8796934392723494799], [6182175443884180016, 6353742403972434158],
$       [5114018600692198819, 5934496761468087587], [2961037765256545853, -3506303606345606091],
$       [1159083700902812888, 2355441258056985541], [-1415891492453967992, -5901082965038006436],
$       [7708146881323003560, 6895209866022597814], [2457659400828241564, -2770313660727131667],
$       [8587481282458412787, -3375179924149677837], [1920492819769714943, 3552067886709326867],
$       [-5540913985159217033, 3783963092582342971], [-2788386488904770217, -8112450597396923468],
$       [1884668896228854636, 5266587784558543534], [-7185547600262954979, -7500746988763937690],
$       [2540213372976302832, -75918619983736767], [3067410083795202237, -7500746988763937690],
$       [7305131493371296278, -8587796901679689253], [-6927064474692379325, 345877205945808106],
$       [-6209490701903270346, 6583708648714954137], [6942447451111273831, -5452060258713466655],
$       [1083972190180208528, 1229878440218097837], [5853547761226394671, 46898620916787369],
$       [-2657834974528367941, 3008290023679899543], [7402800009312242607, -8220847684438624073],
$       [7788434700218340221, 8025498888737249597], [-977166495116586865, 1226782618435349421],
$       [-3867695778411492142, 5420714661313803053], [-1300385040958962567, 1110114464622072781]]}
