language ESSENCE' 1.0

letting n_roads be 4
find valid_Function1D_1: matrix indexed by [int(1..4)] of int(1..4)
find valid_Function1D_2: matrix indexed by [int(1..4)] of int(1, 4)
branching on [valid_Function1D_1, valid_Function1D_2]
such that
    and([((valid_Function1D_1[i] = 1 /\ valid_Function1D_2[i] = 1 \/
           valid_Function1D_1[1 + i % 4] = 1 /\ valid_Function1D_2[1 + i % 4] = 1)
          /\
          (valid_Function1D_1[i] = 4 /\ valid_Function1D_2[i] = 4 \/
           valid_Function1D_1[1 + i % 4] = 4 /\ valid_Function1D_2[1 + i % 4] = 4)
          /\
          ((1 = valid_Function1D_1[i] /\ 1 = valid_Function1D_2[i] \/
            4 = valid_Function1D_1[i] /\ 4 = valid_Function1D_2[i])
           /\
           (1 = valid_Function1D_1[1 + i % 4] /\ 1 = valid_Function1D_2[1 + i % 4] \/
            4 = valid_Function1D_1[1 + i % 4] /\ 4 = valid_Function1D_2[1 + i % 4]))
          \/
          (valid_Function1D_1[i] = 2 /\ valid_Function1D_2[i] = 1 \/
           valid_Function1D_1[1 + i % 4] = 2 /\ valid_Function1D_2[1 + i % 4] = 1)
          /\
          (valid_Function1D_1[i] = 3 /\ valid_Function1D_2[i] = 1 \/
           valid_Function1D_1[1 + i % 4] = 3 /\ valid_Function1D_2[1 + i % 4] = 1)
          /\
          ((2 = valid_Function1D_1[i] /\ 1 = valid_Function1D_2[i] \/
            3 = valid_Function1D_1[i] /\ 1 = valid_Function1D_2[i])
           /\
           (2 = valid_Function1D_1[1 + i % 4] /\ 1 = valid_Function1D_2[1 + i % 4] \/
            3 = valid_Function1D_1[1 + i % 4] /\ 1 = valid_Function1D_2[1 + i % 4])))
         /\
         and([!([valid_Function1D_1[i], valid_Function1D_1[1 + i % 4]; int(1..2)][q2] =
                [valid_Function1D_1[i], valid_Function1D_1[1 + i % 4]; int(1..2)][q3]
                /\
                [valid_Function1D_2[i], valid_Function1D_2[1 + i % 4]; int(1..2)][q2] =
                [valid_Function1D_2[i], valid_Function1D_2[1 + i % 4]; int(1..2)][q3])
                  | q2 : int(1..2), q3 : int(1..2), q2 < q3])
             | i : int(1..4)])

$ Conjure's
$ {"finds": [{"Name": "valid"}], "givens": [], "enumGivens": [],
$  "enumLettings":
$      [{"LettingDomainDefnEnum":
$            [{"Name": "Colours"}, [{"Name": "Red"}, {"Name": "RedYellow"}, {"Name": "Yellow"}, {"Name": "Green"}]]}],
$  "lettings":
$      [[{"Name": "n_roads"}, {"Constant": {"ConstantInt": [{"TagInt": []}, 4]}}],
$       [{"Name": "Road"},
$        {"Domain":
$             {"DomainInt":
$                  [{"TagInt": []},
$                   [{"RangeBounded":
$                         [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                          {"Reference":
$                               [{"Name": "n_roads"},
$                                {"Alias": {"Constant": {"ConstantInt": [{"TagInt": []}, 4]}}}]}]}]]}}],
$       [{"Name": "Colours_EnumSize"}, {"Constant": {"ConstantInt": [{"TagInt": []}, 4]}}],
$       [{"Name": "Colours"},
$        {"Domain":
$             {"DomainInt":
$                  [{"TagEnum": "Colours"},
$                   [{"RangeBounded":
$                         [{"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 1]}},
$                          {"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 4]}}]}]]}}],
$       [{"Name": "VehicleColours"},
$        {"Domain":
$             {"DomainInt":
$                  [{"TagEnum": "Colours"},
$                   [{"RangeBounded":
$                         [{"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 1]}},
$                          {"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 4]}}]}]]}}],
$       [{"Name": "PedestrianColours"},
$        {"Domain":
$             {"DomainInt":
$                  [{"TagEnum": "Colours"},
$                   [{"RangeSingle": {"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 1]}}},
$                    {"RangeSingle": {"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 4]}}}]]}}]],
$  "unnameds": [], "strategyQ": {"PickFirst": []}, "strategyA": {"Compact": []},
$  "trailCompact":
$      [[1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1],
$       [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1], [1, 1, 1]],
$  "nameGenState": [["q", 17]], "nbExtraGivens": 0,
$  "representations":
$      [[{"Name": "valid"},
$        {"DomainFunction":
$             [{"Function_1D": []}, [{"SizeAttr_None": []}, "PartialityAttr_Total", "JectivityAttr_None"],
$              {"DomainInt":
$                   [{"TagInt": []},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                           {"Reference":
$                                [{"Name": "n_roads"},
$                                 {"Alias": {"Constant": {"ConstantInt": [{"TagInt": []}, 4]}}}]}]}]]},
$              {"DomainTuple":
$                   [{"DomainInt":
$                         [{"TagEnum": "Colours"},
$                          [{"RangeBounded":
$                                [{"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 1]}},
$                                 {"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 4]}}]}]]},
$                    {"DomainInt":
$                         [{"TagEnum": "Colours"},
$                          [{"RangeSingle": {"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 1]}}},
$                           {"RangeSingle": {"Constant": {"ConstantInt": [{"TagEnum": "Colours"}, 4]}}}]]}]}]}]],
$  "representationsTree":
$      [[{"Name": "valid"},
$        [{"rootLabel": {"Function_1D": []},
$          "subForest":
$              [{"rootLabel": null, "subForest": []},
$               {"rootLabel": null,
$                "subForest": [{"rootLabel": null, "subForest": []}, {"rootLabel": null, "subForest": []}]}]}]]],
$  "originalDomains":
$      [[{"Name": "valid"},
$        {"DomainFunction":
$             [[], [{"SizeAttr_None": []}, "PartialityAttr_Total", "JectivityAttr_None"],
$              {"DomainInt":
$                   [{"TagInt": []},
$                    [{"RangeBounded":
$                          [{"Constant": {"ConstantInt": [{"TagInt": []}, 1]}},
$                           {"Reference": [{"Name": "n_roads"}, null]}]}]]},
$              {"DomainTuple":
$                   [{"DomainEnum": [{"Name": "Colours"}, null, null]},
$                    {"DomainEnum":
$                         [{"Name": "Colours"},
$                          [{"RangeSingle": {"Reference": [{"Name": "Red"}, null]}},
$                           {"RangeSingle": {"Reference": [{"Name": "Green"}, null]}}],
$                          null]}]}]}]],
$  "trailGeneralised":
$      [[5625968332629931254, 8167583059335685891], [2327849594032546133, -8057287823189621239],
$       [-1001911492882555023, 3344215456274643369], [-74650048376949147, 2690046429072122614],
$       [1711528740161622488, -5159451550121344518], [4718943300250255890, 6581283567278098842],
$       [-4575210286261935886, 1388495099417099674], [-4494382314195303710, 3717757432667139311],
$       [5927401316439495836, -8724841146749456532], [8825170084820721334, 772783788396904628],
$       [7615205408190685898, -5954984200054755690], [813646102867246989, -4089547620313675236],
$       [-426347154878566845, -5030059572932740356], [2601841375582883654, -2501056830526548562],
$       [6738887405672812985, 101216273375832378], [6083019196673790725, 4026682228862901454],
$       [3962804843558803397, -1895977881083512710], [-1928368696082193027, -2329941521298415428],
$       [5046673155164446191, 7960280793566326213], [-786925799542145342, -2835767764475100467],
$       [4641655432982109861, 8421780033906507674], [6481419808380201990, -2359501048594468574],
$       [-2470768178719803970, 7350784262058286503], [4817388835051003112, -7171050431910792786],
$       [5299940952705530500, -1021711664230641962], [2493170288041580896, 8080299746390577685],
$       [6350137550693615147, 6755810181751692915], [-2908507836278022734, 9164293355523443709],
$       [1286871747328384696, 7074600516951066387], [-5602145005594283572, -7092444634439735031],
$       [5815709731325532159, 3338447976825081928], [4417014336506918846, -8563048679395472771],
$       [-1134323430475805922, -842498751798936062], [-3686865281877428736, 3186344425294324681],
$       [-7230975074295939715, -8668202974670724307], [3020352725626759866, -5973297233757969450],
$       [-6686452115623024003, -5392885484277573182], [5735401588875952673, -3553493209481208876],
$       [-984941443766769964, 8033830152805924042], [4827686470744993928, -881095997695539923],
$       [-3097179098050005950, 562058840424432371], [-1802335088234322097, 8987446052405479204],
$       [-6866123681640145001, -5496333944053247433], [5949974229618564575, -3598615801106349500],
$       [360848011033451401, 7370578867103120186], [321787601764422646, 3338447976825081928],
$       [-4318258760305414129, 7590766045151027679], [-6495765892676188093, -2767298253312870445],
$       [1737109432739434116, 933031788237212647], [-7755450392804753216, 7129807071592124809],
$       [7777699177615837587, -3565420104135679237], [4115437043850052462, 6369152145454053438],
$       [-1400460391870073958, 4252755455969059610], [3125290766524911558, -47609647970829442],
$       [8412337545498647918, -8490243589026733107], [3314726592970044012, -2016969585652188751],
$       [706250363413381920, 1994627234007099269], [3705951681784797303, 5970795369969812770],
$       [-4306986570487405339, 8820909484502432434], [3924623065939302863, -7008372771835630221],
$       [4819686291418368330, 5565722708689420566], [5569061225433005904, 4720825936731229213],
$       [7231646418363434587, 2443225243406640274], [-1023536372377093639, -1151625746896966752],
$       [-2074776223624194319, -6060539743435508557], [663935304762805033, 2467625223816276369],
$       [3196907582275013475, 3408575656258980745], [260976298073849992, -5411499123233472576],
$       [7246751212775402013, 5160337408968473833], [-5069413675716964055, -2378278114240712383],
$       [-2312893813367933455, -1512340594173660082], [-4618960171993603840, -7884847707211400758],
$       [7617416986962212380, 7778218486193275284], [-536529024792560078, 1303288342925590930],
$       [7159181230859743910, 606765504320324694], [3903439025151625717, -1117264638290606811],
$       [-5743639794159733986, -5242821042730706569], [7227388574032343633, -5185142833445067991],
$       [1393574495054851153, 7545637590651444597], [4897279388536853820, 1660324076928821330],
$       [6800455104948477084, 1190882743798989824], [2209860297385642332, 6298312903135890801],
$       [-514076872883165121, 3338447976825081928], [637511048725539446, 6674031785381170773],
$       [-8551669936935477799, -455203416774941332], [-6092667070846499174, 2151626107381642320],
$       [8436415949680947182, 8575224837182508767], [-7501414302679464659, -8317688939534243028],
$       [-5481539814877370905, -5960810830813328908], [-7811498133675772449, -6532208962478658930],
$       [1623544667980420827, -1316347737141151216], [8661686496327498621, 6593246654870968920],
$       [6866959096216724011, -8967526107667344002], [6446515483074176361, 6283153707275755534],
$       [-597565947165639067, 4519350424182053376], [-7241659294793897549, 5866110262577695398],
$       [-2877940770239513925, 5330346497948896266], [-8739164995607064645, 3245915199428929237],
$       [1035493667061944973, -5767606995460210799], [-5276198298840738008, -8278957204698150978],
$       [7117818288275389510, -9185142811213394014], [3770273211253088696, 134472140656157882],
$       [-2663929273483460582, 3476074271724002274], [-2810906760484170610, -3318618189120740488],
$       [3948329474648050486, 7177776563678492667], [-6295409173327479119, 1902467268226606789],
$       [4460126245168206571, 8128617285617531835], [-5081977415310946164, -2511965693268375467],
$       [2446361716068204574, -970660563626612455], [-3183046680331927572, -4559692343292573988],
$       [1080314852717505048, -1372246092657886267], [7320785995890240539, 4023184668820169237],
$       [-8042373683028366648, -4233558056875911119], [-4648971019595377926, -1799663763001321427],
$       [-3656026215354763045, 4344683160319716042], [4799557055971699541, -5148829619890793402],
$       [2859758540713013017, -4328922002927364195], [1990159774529810546, -4748786882668873514],
$       [6326311371152766296, 7588589955113231871], [7672669520149500430, -8889990918450745795],
$       [-2620556895863972419, 4436772232622574006], [-2438845622260905536, -2345561708201642643],
$       [-8798409683605670069, -4847239223363235562], [-3863978033145757351, -7516130550350674958],
$       [1020300549757662775, -4559692343292573988], [5619029690143619835, -6613507044148208553],
$       [8126139706893267790, -5990969341900018160], [1440275678819003223, 4706795282168750410],
$       [-7528431108169779273, 8022904057594730403], [-3353969753297426385, 4265821188654868417],
$       [-8959998978373419713, 6850805000799145286], [-84186358339832553, -3428840136559840479],
$       [5668634396965980574, -3021113893492658386], [8104994882274431788, 5787428570559748459],
$       [9002252549245757672, -2703470101849745755], [8755980248515311292, -465151357486624343],
$       [-7804901565164677007, 977426263504193226], [8134102821839305653, -8302667416963996110],
$       [8134505026461330335, -8429405749436169811], [4405400881230917382, 5682963922456455462],
$       [6301152171434670740, 530779036175133847], [-7464739147326947151, 818879508422814940],
$       [-7450021733363800751, 830548786786263638], [-7092213558566222305, 4091151914586930329],
$       [-4745057951999825237, 372441771066735837], [-5486084175758014323, 8669945759655766843],
$       [2909732074041691940, -5236865706249951790], [-301411431816831759, -232895752075438343],
$       [6819523077411223493, 7924932622813682269], [-4989099431096454668, -2552788651266791122],
$       [-8285923342315199172, 3406009807831926746], [-1805265415464756564, -6955291662621144718],
$       [-1839291673574471352, 7266732268006724814], [1607964355520367996, -883473614925227376],
$       [-3713495974373085880, 5366775858832931595], [8934393317928674967, -1697233341898029571],
$       [3692243237144524032, -4428725748952036000], [-911346700166603860, -5217325126178527437],
$       [280253508400791030, 1749383739384483612], [2814261766317470931, -4297909650983774190],
$       [9112282277092448117, -6757800948707460173], [3903426800463216919, -4559692343292573988],
$       [-3980940570316711009, -6862346452182067491], [8474287432144852535, 4551696707906318431],
$       [9060421677945409644, 879179911618706837], [2730236550317652163, -1593908677285008485],
$       [-683647527660998729, -4033284059791676196], [-156312396594103964, 8608504338831795784],
$       [-7407745032894303685, 5260532809903706487], [-5976498434809377450, -3791817161339667596],
$       [-3764387334265320178, 8199727782288854289], [2506144995637156812, -2478892057033180117],
$       [-462070513996913738, 866095069498339021], [7035290675930747572, 4023061219055573198],
$       [-4124522001039703174, 5590810359079391093], [5908884342325144102, 5311776995533429477],
$       [-3589225907357922034, 5590810359079391093], [7448442764811498682, 5311776995533429477],
$       [4718057462221334647, 4020121732355518107], [-2806401107490475973, -255264258602514131],
$       [3459737980186103231, -11950987969669918], [-1372156686885144012, 12477646138619414],
$       [4524181351642806348, 5658222399501744657], [7287549434553189869, 4924221827486632978],
$       [6496431218800339354, 5658222399501744657]],
$  "trailVerbose": [], "trailRewrites": []}
